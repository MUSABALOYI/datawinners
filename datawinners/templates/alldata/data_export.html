{% extends 'alldata/alldata_layout.html' %}
{% load i18n %}
{% load user_tags %}
{% load dw_tabs %}

{% block page_css %}
    {{ block.super }}
    <link href="/media/javascript/dateRangePicker/css/ui.daterangepicker.css" rel="stylesheet"/>
    <link href="/media/javascript/dateRangePicker/css/ui-lightness/jquery-ui-1.8.12.custom.css" rel="stylesheet"/>
    <link href="/media/css/scss/util.css" rel="stylesheet"/>
    <link href="/media/css/scss/data_export.css" rel="stylesheet"/>
    <link href="/media/css/scss/form.css" rel="stylesheet"/>

{% endblock %}

{% block page_js %}
    <script type="text/javascript" src="/media/javascript/dateRangePicker/js/daterangepicker.jQuery.js"></script>
    <script type="text/javascript" src="/media/javascript/dateRangePicker/js/jquery-ui-1.8.12.custom.min.js"></script>
    <script type="text/javascript" src="/media/javascript/datepicker.{% trans "en" %}.js"></script>
    <script type="text/javascript" src="/media/javascript/alldata/data_export.js"/>
    {{ block.super }}
{% endblock %}

{% block body %}
    {% activetab "tab_nav" "data_export" %}
    {{ block.super }}
{% endblock %}

{% block content %}
    <p class="help_accordion">Use DataWinners' API to export your data in JSON format.</p>
    <div class="data_export_panel">
        <div>
            <h2>Project</h2>
        </div>

        <p class="help_accordion">Export all successful submissions for a single project</p>

        <div class='project_selection'>
            <div >
                <label for='project_select'>Project:</label>
            </div>
            <select id='project_select'  >
                {% for project in projects %}
                    <option value="{{ project.qid }}">{{ project.name }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="date_range_selection">
            <div >
                <label for='dateRangePicker'>Date Range:</label>
                <label class="help_accordion">Optional</label>
            </div>
            <input  type="text" id="dateRangePicker" value="{% trans 'Click to select a date range' %}"/>

        </div>
        <div class="export_btn" >
            <input type="button" class="button_blue" id='exportProjectBtn' value="Export">

        </div>

    </div>

    <div class="data_export_panel_for_entity">
        <div>
            <h2>Single Subject</h2>
        </div>

        <p class="help_accordion">Export all successful submissions for a single Subject.</p>

        <div class='project_selection'>
            <div >
                <label for='project_select'>Subject Type:</label>
            </div>
            <select id='subject_type_select' >
                {% for each in subject_types %}
                    <option value="{{ each}}">{{ each }}</option>
                {% endfor %}
            </select>
        </div>
        <div class='project_selection'>
            <div >
                <label for='subject_select'>Individual Subject:</label>
            </div>
            <select id='subject_select' >
                {% for each in subjects %}
                    <option value="{{ each.id }}">{{ each.name }}</option>
                {% endfor %}
            </select>
        </div>

        <div class="date_range_selection">
            <div >
                <label for='dateRangePicker'>Date Range:</label>
                <label class="help_accordion">Optional</label>
            </div>
            <input  type="text" id="dateRangePickerForEntity" value="{% trans 'Click to select a date range' %}"/>

        </div>
        <div class="export_btn" >
            <input type="button" class="button_blue" id='exportEntityBtn' value="Export">

        </div>

    </div>
    <div class="data_export_panel_for_register_subject">
        <div>
            <h2>Registered Subjects</h2>
        </div>

        <p class="help_accordion">Export all registration submissions for a Subject Type(example:All Clinics).</p>

        <div class='project_selection'>
            <div >
                <label for='register_subject_select'>Subject Type:</label>
            </div>
            <select id='register_subject_select' >
                {% for each in registered_subject_types %}
                    <option value="{{ each}}">{{ each }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="date_range_selection">
            <div >
                <label for='dateRangePickerForRegisterSubject'>Date Range:</label>
                <label class="help_accordion">Optional</label>
            </div>
            <input  type="text" id="dateRangePickerForRegisterSubject" value="{% trans 'Click to select a date range' %}"/>

        </div>
        <div class="export_btn" >
            <input type="button" class="button_blue" id='exportRegisterSubjectBtn' value="Export">

        </div>

    </div>
{% endblock %}
