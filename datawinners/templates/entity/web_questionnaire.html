{% extends 'layout_application.html' %}
{% load i18n %}
{% block page_title %}{% trans "Subjects" %}{% endblock %}

{% block section_title %}{% trans "Add a" %} {{ entity|capfirst }}
{% endblock %}

{% load field_tags %}
{% load dw_tabs %}
{% block body %}
    {% activetab "main_nav" "subjects" %}
    {{ block.super }}
{% endblock %}

{% block page_scss %}
    {{ block.super }}
    <link href="/media/css/scss/section_web_questionnaire.scss"
          rel="stylesheet"/>
{% endblock %}

{% block page_js %}
    {{ block.super }}
    <script src="/media/javascript/project/web_questionnaire.js"
            type="text/javascript"></script>
{% endblock %}

{% block content %}
    {% if success_message %}
        <div class="success-message-box">{{ success_message }}</div>
    {% endif %}
    {% if error_message %}
        <div class="message-box">{{ error_message }}</div>
    {% endif %}

    {% if 0 %}
        <div class="warning-message-box">
            <p> {% trans "You have used up your 10 Web submissions for the trial account. Sign up for a monthly subscription to continue sending in data to your projects." %} </p>
            <a href="/en/pricing/" class="trial_web_learn_more">Learn
                More</a><a
                href="{% url datawinners.accountmanagement.views.upgrade %}"
                class="trial_web_limit_button">Subscribe Now</a>
        </div>
    {% endif %}

    {% if questionnaire_form.non_fielderrors %}
        <div class="message-box">{{ questionnaire_form.non_field_errors }}</div>
    {% endif %}
    {% for field in questionnaire_form %}
        {% if field.is_hidden and field.name == 'entity_question_code' %}
            <input id='code' type="hidden" value="{{ field.label }}"/>
        {% endif %}
    {% endfor %}
    <form method="POST">
        {% csrf_token %}
        <ul class="que_width">
            {% for field in questionnaire_form %}
                <li>
                    {% if not field.is_hidden %}
                        <h6>{{ field.label }}</h6>
                        <input id='code1' type="hidden"
                               value="{{ field.name }}"/>
                        <p class="instructions italic">
                            {{ field.help_text }}
                        </p>
                    {% endif %}
                    <div class="answer">
                        {% if field|field_type == 'ChoiceField' %}
                            <span class="single_select_question" wmwrap="true">
                                {{ field }}
                            </span>
                        {% else %}
                            {{ field }}
                        {% endif %}
                        {% if field.errors %}
                            <ul class="errorlist">
                                {% for error in field.errors %}
                                    <li>
                                        {{ error }}
                                    </li>
                                {% endfor %}
                            </ul>
                        {% endif %}
                    </div>
                </li>
            {% endfor %}
        </ul>
        <input type="submit" class="button" value="{% trans 'Submit' %}"/>
    </form>
{% endblock %}